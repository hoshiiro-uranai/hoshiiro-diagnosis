// 星色算出エンジン（Kiriko Original System）

export function calculateHoshiiro(birthDate){

  const SHUKU_TO_EMO = {
    "室宿":"直感・理想型",
    "壁宿":"直感・理想型",
    "奎宿":"直感・理想型",
    "胃宿":"直感・理想型",
    "昴宿":"直感・理想型",
    "虚宿":"直感・理想型",

    "角宿":"探求・内省型",
    "亢宿":"探求・内省型",
    "氐宿":"探求・内省型",
    "箕宿":"探求・内省型",
    "星宿":"探求・内省型",

    "牛宿":"安定・防衛型",
    "女宿":"安定・防衛型",
    "危宿":"安定・防衛型",
    "斗宿":"安定・防衛型",
    "井宿":"安定・防衛型",

    "房宿":"表現・放出型",
    "心宿":"表現・放出型",
    "尾宿":"表現・放出型",
    "婁宿":"表現・放出型",
    "張宿":"表現・放出型",

    "畢宿":"共感・吸収型",
    "觜宿":"共感・吸収型",
    "参宿":"共感・吸収型",
    "鬼宿":"共感・吸収型",
    "柳宿":"共感・吸収型",
    "翼宿":"共感・吸収型",
    "軫宿":"共感・吸収型"
  };

  function getSunSign(dateObj){
    const m = dateObj.getMonth()+1;
    const d = dateObj.getDate();

    if ((m===3 && d>=21)||(m===4 && d<=19)) return "おひつじ座";
    if ((m===4 && d>=20)||(m===5 && d<=20)) return "おうし座";
    if ((m===5 && d>=21)||(m===6 && d<=21)) return "ふたご座";
    if ((m===6 && d>=22)||(m===7 && d<=22)) return "かに座";
    if ((m===7 && d>=23)||(m===8 && d<=22)) return "しし座";
    if ((m===8 && d>=23)||(m===9 && d<=22)) return "おとめ座";
    if ((m===9 && d>=23)||(m===10 && d<=23)) return "てんびん座";
    if ((m===10 && d>=24)||(m===11 && d<=22)) return "さそり座";
    if ((m===11 && d>=23)||(m===12 && d<=21)) return "いて座";
    if ((m===12 && d>=22)||(m===1 && d<=19)) return "やぎ座";
    if ((m===1 && d>=20)||(m===2 && d<=18)) return "みずがめ座";
    return "うお座";
  }

  const dateObj = new Date(birthDate);
  const sun = getSunSign(dateObj);

  // 感情タイプ → 星色変換
  const TYPE_TO_COLOR = {
    "共感・吸収型":"桜",
    "直感・理想型":"白花",
    "探求・内省型":"瑠璃",
    "安定・防衛型":"亜麻",
    "表現・放出型":"紅"
  };

  return {
    sunSign: sun,
    color: TYPE_TO_COLOR["直感・理想型"]
  };
}
